// Other implementations:
// - https://react.semantic-ui.com/elements/input/#states-loading

// Remove inner calc() for IE, see https://github.com/postcss/autoprefixer/issues/1153
@function removeInnerCalc_IEFix($innerCalc) {
  @return str-replace($innerCalc, 'calc');
}

@function calcInputRightPadding($rightElementWidth) {
  // prettier-ignore
  @return calc(
    #{$rightElementWidth} - #{$input-border-width} * 2 + #{removeInnerCalc_IEFix($input-height-inner-quarter)} * 2
  );
}

@function calcInputTopMargin($rightElementHeight) {
  @return calc((#{removeInnerCalc_IEFix($input-height)} + #{$rightElementHeight}) / -2);
}

input.is-loading {
  // Cannot use the same as the validation icons because .spinner-border is too big
  padding-right: calcInputRightPadding($spinner-width);

  &.is-loading-sm {
    // Same as the validation icons, this is possible because .spinner-border-sm is small enough
    //padding-right: calcInputRightPadding($spinner-width-sm);
    // See https://github.com/twbs/bootstrap/blob/v4.3.1/scss/mixins/_forms.scss#L59
    padding-right: $input-height-inner;
  }

  + .spinner-border,
  + .spinner-grow {
    float: right;

    // Same as the validation icons
    // See https://github.com/twbs/bootstrap/blob/v4.3.1/scss/mixins/_forms.scss#L62
    margin-right: $input-height-inner-quarter;

    margin-top: calcInputTopMargin($spinner-height);

    &.spinner-border-sm,
    &.spinner-grow-sm {
      margin-top: calcInputTopMargin($spinner-height-sm);
    }
  }
}
